import"../chunks/paths.6b01fb37.js";import{_ as Ze}from"../chunks/preload-helper.cf010ec4.js";import{s as ue,c as W,g as nr,d as U,e as X,f as Z,h as ae,u as le,i as ce,j as he,n as Xe,r as Cr,k as Ar,l as jr,o as Pr,m as Rr,p as Ir,q as $r}from"../chunks/scheduler.83f83461.js";import{S as ge,i as me,e as Ie,a as O,p as Ye,t as A,b as Qe,d as E,f as y,g as L,s as q,h as N,j as x,c as V,x as se,y as F,z as ee,m as ye,n as we,k as S,o as ir,A as Dr,B as or,C as Oe,D as Ce,r as M,u as z,v as H,w as J,H as Ur,E as xr,F as jt,G as Pt,I as Rt}from"../chunks/index.9fb0017f.js";import{B as ar,I as Lr,l as Nr}from"../chunks/logo.48b427f7.js";import{t as Y,g as de,F as lr,a as cr}from"../chunks/Indicator.svelte_svelte_type_style_lang.4764bbb6.js";import{i as Fr,e as Br}from"../chunks/forms.4fd3e1e6.js";function Mr(s,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in s)){const n=Object.getOwnPropertyDescriptor(r,i);n&&Object.defineProperty(s,i,n.get?n:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}const zr="https://wvinoauizvobsokmlyhc.supabase.co",Hr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind2aW5vYXVpenZvYnNva21seWhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTAzNTMxNzMsImV4cCI6MjAwNTkyOTE3M30.woyrR2pG6UeM0cuyrxncZxKGlh4zwPUGKlYb0BLbe2E";new TextEncoder;const Jr=new TextDecoder,Gr=s=>{const e=atob(s),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},Kr=s=>{let e=s;e instanceof Uint8Array&&(e=Jr.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Gr(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},qr=Kr;var Vr=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const Wr=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Vr(void 0,void 0,void 0,function*(){return yield(yield Ze(()=>Promise.resolve().then(()=>et),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class kt extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Xr extends kt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yr extends kt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Qr extends kt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zr=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};class es{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=Wr(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Zr(this,void 0,void 0,function*(){try{const{headers:i,method:n,body:o}=t;let a={},l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(v=>{throw new Xr(v)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new Yr(c);if(!c.ok)throw new Qr(c);let u=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),d;return u==="application/json"?d=yield c.json():u==="application/octet-stream"?d=yield c.blob():u==="multipart/form-data"?d=yield c.formData():d=yield c.text(),{data:d,error:null}}catch(i){return{data:null,error:i}}})}}var ts=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var gt={exports:{}};(function(s,e){var t=typeof self<"u"?self:ts,r=function(){function n(){this.fetch=!1,this.DOMException=t.DOMException}return n.prototype=t,new n}();(function(n){(function(o){var a={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function l(_){return _&&DataView.prototype.isPrototypeOf(_)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(_){return _&&c.indexOf(Object.prototype.toString.call(_))>-1};function u(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function d(_){return typeof _!="string"&&(_=String(_)),_}function v(_){var b={next:function(){var T=_.shift();return{done:T===void 0,value:T}}};return a.iterable&&(b[Symbol.iterator]=function(){return b}),b}function g(_){this.map={},_ instanceof g?_.forEach(function(b,T){this.append(T,b)},this):Array.isArray(_)?_.forEach(function(b){this.append(b[0],b[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(b){this.append(b,_[b])},this)}g.prototype.append=function(_,b){_=u(_),b=d(b);var T=this.map[_];this.map[_]=T?T+", "+b:b},g.prototype.delete=function(_){delete this.map[u(_)]},g.prototype.get=function(_){return _=u(_),this.has(_)?this.map[_]:null},g.prototype.has=function(_){return this.map.hasOwnProperty(u(_))},g.prototype.set=function(_,b){this.map[u(_)]=d(b)},g.prototype.forEach=function(_,b){for(var T in this.map)this.map.hasOwnProperty(T)&&_.call(b,this.map[T],T,this)},g.prototype.keys=function(){var _=[];return this.forEach(function(b,T){_.push(T)}),v(_)},g.prototype.values=function(){var _=[];return this.forEach(function(b){_.push(b)}),v(_)},g.prototype.entries=function(){var _=[];return this.forEach(function(b,T){_.push([T,b])}),v(_)},a.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function p(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function f(_){return new Promise(function(b,T){_.onload=function(){b(_.result)},_.onerror=function(){T(_.error)}})}function m(_){var b=new FileReader,T=f(b);return b.readAsArrayBuffer(_),T}function w(_){var b=new FileReader,T=f(b);return b.readAsText(_),T}function R(_){for(var b=new Uint8Array(_),T=new Array(b.length),G=0;G<b.length;G++)T[G]=String.fromCharCode(b[G]);return T.join("")}function k(_){if(_.slice)return _.slice(0);var b=new Uint8Array(_.byteLength);return b.set(new Uint8Array(_)),b.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(_){this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:a.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:a.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():a.arrayBuffer&&a.blob&&l(_)?(this._bodyArrayBuffer=k(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||h(_))?this._bodyArrayBuffer=k(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var _=p(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var _=p(this);if(_)return _;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(Tr)}),this.json=function(){return this.text().then(JSON.parse)},this}var pe=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function C(_){var b=_.toUpperCase();return pe.indexOf(b)>-1?b:_}function ie(_,b){b=b||{};var T=b.body;if(_ instanceof ie){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,b.headers||(this.headers=new g(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!T&&_._bodyInit!=null&&(T=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=b.credentials||this.credentials||"same-origin",(b.headers||!this.headers)&&(this.headers=new g(b.headers)),this.method=C(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&T)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(T)}ie.prototype.clone=function(){return new ie(this,{body:this._bodyInit})};function Tr(_){var b=new FormData;return _.trim().split("&").forEach(function(T){if(T){var G=T.split("="),B=G.shift().replace(/\+/g," "),$=G.join("=").replace(/\+/g," ");b.append(decodeURIComponent(B),decodeURIComponent($))}}),b}function Er(_){var b=new g,T=_.replace(/\r?\n[\t ]+/g," ");return T.split(/\r?\n/).forEach(function(G){var B=G.split(":"),$=B.shift().trim();if($){var He=B.join(":").trim();b.append($,He)}}),b}j.call(ie.prototype);function oe(_,b){b||(b={}),this.type="default",this.status=b.status===void 0?200:b.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in b?b.statusText:"OK",this.headers=new g(b.headers),this.url=b.url||"",this._initBody(_)}j.call(oe.prototype),oe.prototype.clone=function(){return new oe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},oe.error=function(){var _=new oe(null,{status:0,statusText:""});return _.type="error",_};var Or=[301,302,303,307,308];oe.redirect=function(_,b){if(Or.indexOf(b)===-1)throw new RangeError("Invalid status code");return new oe(null,{status:b,headers:{location:_}})},o.DOMException=n.DOMException;try{new o.DOMException}catch{o.DOMException=function(b,T){this.message=b,this.name=T;var G=Error(b);this.stack=G.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function st(_,b){return new Promise(function(T,G){var B=new ie(_,b);if(B.signal&&B.signal.aborted)return G(new o.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function He(){$.abort()}$.onload=function(){var Ue={status:$.status,statusText:$.statusText,headers:Er($.getAllResponseHeaders()||"")};Ue.url="responseURL"in $?$.responseURL:Ue.headers.get("X-Request-URL");var nt="response"in $?$.response:$.responseText;T(new oe(nt,Ue))},$.onerror=function(){G(new TypeError("Network request failed"))},$.ontimeout=function(){G(new TypeError("Network request failed"))},$.onabort=function(){G(new o.DOMException("Aborted","AbortError"))},$.open(B.method,B.url,!0),B.credentials==="include"?$.withCredentials=!0:B.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&a.blob&&($.responseType="blob"),B.headers.forEach(function(Ue,nt){$.setRequestHeader(nt,Ue)}),B.signal&&(B.signal.addEventListener("abort",He),$.onreadystatechange=function(){$.readyState===4&&B.signal.removeEventListener("abort",He)}),$.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return st.polyfill=!0,n.fetch||(n.fetch=st,n.Headers=g,n.Request=ie,n.Response=oe),o.Headers=g,o.Request=ie,o.Response=oe,o.fetch=st,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,s.exports=e})(gt,gt.exports);var St=gt.exports;const Tt=rs(St),et=Mr({__proto__:null,default:Tt},[St]);class ss{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Tt:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var o,a,l;let c=null,h=null,u=null,d=n.status,v=n.statusText;if(n.ok){if(this.method!=="HEAD"){const m=await n.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=m:h=JSON.parse(m))}const p=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),f=(a=n.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");p&&f&&f.length>1&&(u=parseInt(f[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,u=null,d=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const p=await n.text();try{c=JSON.parse(p),Array.isArray(c)&&n.status===404&&(h=[],c=null,d=200,v="OK")}catch{n.status===404&&p===""?(d=204,v="No Content"):c={message:p}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("Results contain 0 rows"))&&(c=null,d=200,v="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:h,count:u,status:d,statusText:v}});return this.shouldThrowOnError||(i=i.catch(n=>{var o,a,l;return{error:{message:`${(o=n==null?void 0:n.name)!==null&&o!==void 0?o:"FetchError"}: ${n==null?void 0:n.message}`,details:`${(a=n==null?void 0:n.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=n==null?void 0:n.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}class ns extends ss{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i}={}){const n=i?`${i}.order`:"order",o=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const i=typeof r>"u"?"offset":`${r}.offset`,n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:n=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Pe extends ns{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let n="";i==="plain"?n="pl":i==="phrase"?n="ph":i==="websearch"&&(n="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class is{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let n=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Pe({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Pe({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:n=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){const c=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new Pe({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new Pe({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Pe({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const os="1.7.2",as={"X-Client-Info":`postgrest-js/${os}`};class ls{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},as),t),this.schema=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new is(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let n;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(n="HEAD",Object.entries(t).forEach(([c,h])=>{o.searchParams.append(c,`${h}`)})):(n="POST",a=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Pe({method:n,url:o,headers:l,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var it,It;function cs(){if(It)return it;It=1;var s=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return it=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return s()}try{return __global__||s()}finally{delete Object.prototype.__global__}}(),it}const hs="websocket",us="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",ds=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],fs="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",_s=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],gs="1.0.34",ms={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},ps="https://github.com/theturtle32/WebSocket-Node",vs={node:">=4.0.0"},bs={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},ys={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},ws={verbose:!1},ks={test:"tape test/unit/*.js",gulp:"gulp"},Ss="index",Ts={lib:"./lib"},Es="lib/browser.js",Os="Apache-2.0",Cs={name:hs,description:us,keywords:ds,author:fs,contributors:_s,version:gs,repository:ms,homepage:ps,engines:vs,dependencies:bs,devDependencies:ys,config:ws,scripts:ks,main:Ss,directories:Ts,browser:Es,license:Os};var As=Cs.version,Se;if(typeof globalThis=="object")Se=globalThis;else try{Se=cs()}catch{}finally{if(!Se&&typeof window<"u"&&(Se=window),!Se)throw new Error("Could not determine global this")}var Me=Se.WebSocket||Se.MozWebSocket,js=As;function hr(s,e){var t;return e?t=new Me(s,e):t=new Me(s),t}Me&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(s){Object.defineProperty(hr,s,{get:function(){return Me[s]}})});var Ps={w3cwebsocket:Me?hr:null,version:js};const Rs="2.7.3",Is={"X-Client-Info":`realtime-js/${Rs}`},$s="1.0.0",ur=1e4,Ds=1e3;var Fe;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Fe||(Fe={}));var te;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(te||(te={}));var ne;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ne||(ne={}));var mt;(function(s){s.websocket="websocket"})(mt||(mt={}));var Te;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Te||(Te={}));class dr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Us{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),n=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+n));o=o+n;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class ot{constructor(e,t,r={},i=ur){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $t;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})($t||($t={}));class Be{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:n,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Be.syncState(this.state,i,n,o),this.pendingDiffs.forEach(l=>{this.state=Be.syncDiff(this.state,l,n,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:n,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Be.syncDiff(this.state,i,n,o),a())}),this.onJoin((i,n,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:o})}),this.onLeave((i,n,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const n=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(n,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const u=n[c];if(u){const d=h.map(f=>f.presence_ref),v=u.map(f=>f.presence_ref),g=h.filter(f=>v.indexOf(f.presence_ref)<0),p=u.filter(f=>d.indexOf(f.presence_ref)<0);g.length>0&&(a[c]=g),p.length>0&&(l[c]=p)}else a[c]=h}),this.syncDiff(n,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:n,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(n,(a,l)=>{var c;const h=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),h.length>0){const u=e[a].map(v=>v.presence_ref),d=h.filter(v=>u.indexOf(v.presence_ref)<0);e[a].unshift(...d)}r(a,h,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const h=l.map(u=>u.presence_ref);c=c.filter(u=>h.indexOf(u.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var D;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(D||(D={}));const Dt=(s,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,o)=>(n[o]=xs(o,s,e,i),n),{})},xs=(s,e,t,r)=>{const i=e.find(a=>a.name===s),n=i==null?void 0:i.type,o=t[s];return n&&!r.includes(n)?fr(n,o):pt(o)},fr=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Bs(e,t)}switch(s){case D.bool:return Ls(e);case D.float4:case D.float8:case D.int2:case D.int4:case D.int8:case D.numeric:case D.oid:return Ns(e);case D.json:case D.jsonb:return Fs(e);case D.timestamp:return Ms(e);case D.abstime:case D.date:case D.daterange:case D.int4range:case D.int8range:case D.money:case D.reltime:case D.text:case D.time:case D.timestamptz:case D.timetz:case D.tsrange:case D.tstzrange:return pt(e);default:return pt(e)}},pt=s=>s,Ls=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Ns=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Fs=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Bs=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let n;const o=s.slice(1,t);try{n=JSON.parse("["+o+"]")}catch{n=o?o.split(","):[]}return n.map(a=>fr(e,a))}return s},Ms=s=>typeof s=="string"?s.replace(" ","T"):s;var Ut=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})},xt;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(xt||(xt={}));var Lt;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes"})(Lt||(Lt={}));var Nt;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Nt||(Nt={}));class Et{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new ot(this,ne.join,this.params,this.timeout),this.rejoinTimer=new dr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=te.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ne.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new Be(this)}subscribe(e,t=this.timeout){var r,i;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:n,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:n,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var h;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const u=this.bindings.postgres_changes,d=(h=u==null?void 0:u.length)!==null&&h!==void 0?h:0,v=[];for(let g=0;g<d;g++){const p=u[g],{filter:{event:f,schema:m,table:w,filter:R}}=p,k=c&&c[g];if(k&&k.event===f&&k.schema===m&&k.table===w&&k.filter===R)v.push(Object.assign(Object.assign({},p),{id:k.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return Ut(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return Ut(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise(r=>{var i,n,o;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&r("rate limited"),e.type==="broadcast"&&!(!((o=(n=(i=this.params)===null||i===void 0?void 0:i.config)===null||n===void 0?void 0:n.broadcast)===null||o===void 0)&&o.ack)&&r("ok"),a.receive("ok",()=>r("ok")),a.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=te.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ne.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new ot(this,ne.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ot(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,n;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=ne;if(r&&[a,l,c,h].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var g,p,f;return((g=v.filter)===null||g===void 0?void 0:g.event)==="*"||((f=(p=v.filter)===null||p===void 0?void 0:p.event)===null||f===void 0?void 0:f.toLocaleLowerCase())===o}).map(v=>v.callback(d,r)):(n=this.bindings[o])===null||n===void 0||n.filter(v=>{var g,p,f,m,w,R;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const k=v.id,j=(g=v.filter)===null||g===void 0?void 0:g.event;return k&&((p=t.ids)===null||p===void 0?void 0:p.includes(k))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((f=t.data)===null||f===void 0?void 0:f.type.toLocaleLowerCase()))}else{const k=(w=(m=v==null?void 0:v.filter)===null||m===void 0?void 0:m.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return k==="*"||k===((R=t==null?void 0:t.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:p,table:f,commit_timestamp:m,type:w,errors:R}=g;d=Object.assign(Object.assign({},{schema:p,table:f,commit_timestamp:m,eventType:w,new:{},old:{},errors:R}),this._getPayloadRecords(g))}v.callback(d,r)})}_isClosed(){return this.state===te.closed}_isJoined(){return this.state===te.joined}_isJoining(){return this.state===te.joining}_isLeaving(){return this.state===te.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),n={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&Et.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ne.close,{},e)}_onError(e){this._on(ne.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=te.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Dt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Dt(e.columns,e.old_record)),t}}var at=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const zs=()=>{};class Hs{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Is,this.params={},this.timeout=ur,this.transport=Ps.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=zs,this.conn=null,this.sendBuffer=[],this.serializer=new Us,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${mt.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(n,o)=>o(JSON.stringify(n)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new dr(()=>at(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return at(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return at(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Fe.connecting:return Te.Connecting;case Fe.open:return Te.Open;case Fe.closing:return Te.Closing;default:return Te.Closed}}isConnected(){return this.connectionState()===Te.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new Et(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:n}=e;let o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};if(this.log("push",`${t} ${r} (${n})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(ne.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$s}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:n,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(n==null?void 0:n.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,n),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,n,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ne.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ds,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class Ot extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function K(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Js extends Ot{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ft extends Ot{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var _r=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const gr=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>_r(void 0,void 0,void 0,function*(){return yield(yield Ze(()=>Promise.resolve().then(()=>et),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Gs=()=>_r(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ze(()=>Promise.resolve().then(()=>et),void 0)).Response:Response});var $e=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const lt=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Ks=(s,e)=>$e(void 0,void 0,void 0,function*(){const t=yield Gs();s instanceof t?s.json().then(r=>{e(new Js(lt(r),s.status||500))}).catch(r=>{e(new Ft(lt(r),r))}):e(new Ft(lt(s),s))}),qs=(s,e,t,r)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function tt(s,e,t,r,i,n){return $e(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(t,qs(e,r,i,n)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ks(l,a))})})}function vt(s,e,t,r){return $e(this,void 0,void 0,function*(){return tt(s,"GET",e,t,r)})}function be(s,e,t,r,i){return $e(this,void 0,void 0,function*(){return tt(s,"POST",e,r,i,t)})}function Vs(s,e,t,r,i){return $e(this,void 0,void 0,function*(){return tt(s,"PUT",e,r,i,t)})}function mr(s,e,t,r,i){return $e(this,void 0,void 0,function*(){return tt(s,"DELETE",e,r,i,t)})}var re=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const Ws={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xs{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=gr(i)}uploadOrUpdate(e,t,r,i){return re(this,void 0,void 0,function*(){try{let n;const o=Object.assign(Object.assign({},Bt),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",o.cacheControl)):(n=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:n,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return h.ok?{data:{path:l},error:null}:{data:null,error:yield h.json()}}catch(n){if(K(n))return{data:null,error:n};throw n}})}upload(e,t,r){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return re(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),o=this._getFinalPath(n),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:Bt.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const u=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h});return u.ok?{data:{path:n},error:null}:{data:null,error:yield u.json()}}catch(l){if(K(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return re(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield be(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+r.url),n=i.searchParams.get("token");if(!n)throw new Ot("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:n},error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}})}update(e,t,r){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return re(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}copy(e,t){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield be(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield be(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(i){if(K(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return re(this,void 0,void 0,function*(){try{const i=yield be(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(i){if(K(i))return{data:null,error:i};throw i}})}download(e,t){return re(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=n?`?${n}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield vt(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(K(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],n=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&i.push(n);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return re(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}})}list(e,t,r){return re(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ws),t),{prefix:e||""});return{data:yield be(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(K(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ys="2.5.1",Qs={"X-Client-Info":`storage-js/${Ys}`};var Ae=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};class Zs{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Qs),t),this.fetch=gr(r)}listBuckets(){return Ae(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(K(e))return{data:null,error:e};throw e}})}getBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ae(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ae(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}})}}class en extends Zs{constructor(e,t={},r){super(e,t,r)}from(e){return new Xs(this.url,this.headers,e,this.fetch)}}const tn="2.29.0",rn={"X-Client-Info":`supabase-js/${tn}`};var sn=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const nn=s=>{let e;return s?e=s:typeof fetch>"u"?e=Tt:e=fetch,(...t)=>e(...t)},on=()=>typeof Headers>"u"?St.Headers:Headers,an=(s,e,t)=>{const r=nn(t),i=on();return(n,o)=>sn(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:s;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(n,Object.assign(Object.assign({},o),{headers:c}))})};function ln(s){return s.replace(/\/$/,"")}function cn(s,e){const{db:t,auth:r,realtime:i,global:n}=s,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),n)}}function hn(s){return Math.round(Date.now()/1e3)+s}function un(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const _e=()=>typeof document<"u",ke={tested:!1,writable:!1},We=()=>{if(!_e())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ke.tested)return ke.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),ke.tested=!0,ke.writable=!0}catch{ke.tested=!0,ke.writable=!1}return ke.writable};function Q(s,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),s=s.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+s+"(=([^&#]*)|&|#|$)"),i=r.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const pr=s=>{let e;return s?e=s:typeof fetch>"u"?e=async(...t)=>await(await Ze(()=>Promise.resolve().then(()=>et),void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},dn=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",xe=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Je=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ct=async(s,e)=>{await s.removeItem(e)};function fn(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,n,o,a,l,c,h=0;for(s=s.replace("-","+").replace("_","/");h<s.length;)o=e.indexOf(s.charAt(h++)),a=e.indexOf(s.charAt(h++)),l=e.indexOf(s.charAt(h++)),c=e.indexOf(s.charAt(h++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,n=(l&3)<<6|c,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),c!=64&&n!=0&&(t=t+String.fromCharCode(n));return t}class rt{constructor(){this.promise=new rt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}rt.promiseConstructor=Promise;function Mt(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(fn(r))}function _n(s){return new Promise(e=>{setTimeout(()=>e(null),s)})}function gn(s,e){return new Promise((r,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{const o=await s(n);if(!e(n,null,o)){r(o);return}}catch(o){if(!e(n,o)){i(o);return}}})()})}function mn(s){return("0"+s.toString(16)).substr(-2)}function Ge(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let n=0;n<56;n++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,mn).join("")}async function pn(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}function vn(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ke(s){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const e=await pn(s);return vn(e)}const bn="__stack_guard__",yn="__",wn=/__stack_guard__([a-zA-Z0-9_-]+)__/;let zt=!1,Ct;function bt(s){var e,t;Ct();let r;try{throw new Error}catch(n){r=n}const i=(t=(e=r.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let n=0;n<i.length;n+=1){const a=i[n].match(wn);if(a&&a[1]===s)return!0}return!1}async function yt(s,e){await Ct();const t=`${bn}${s}${yn}`;return await{[t]:async()=>await e()}[t]()}Ct=async()=>{zt||(zt=!0,await yt("ENV_CHECK",async()=>{const s=bt("ENV_CHECK");return s||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),s}))};class At extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function P(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class kn extends At{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Sn(s){return P(s)&&s.name==="AuthApiError"}class vr extends At{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class De extends At{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class je extends De{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class ht extends De{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class qe extends De{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class fe extends De{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ut extends De{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wt extends De{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function Ht(s){return P(s)&&s.name==="AuthRetryableFetchError"}var Tn=globalThis&&globalThis.__rest||function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};const Le=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),En=[502,503,504];async function Jt(s){if(!dn(s))throw new wt(Le(s),0);if(En.includes(s.status))throw new wt(Le(s),s.status);let e;try{e=await s.json()}catch(t){throw new vr(Le(t),t)}throw new kn(Le(e),s.status||500)}const On=(s,e,t,r)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function I(s,e,t,r){var i;const n=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(n.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Cn(s,e,t+a,{headers:n,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Cn(s,e,t,r,i,n){const o=On(e,r,i,n);let a;try{a=await s(t,o)}catch(l){throw console.error(l),new wt(Le(l),0)}if(a.ok||await Jt(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Jt(l)}}function ve(s){var e;let t=null;Rn(s)&&(t=Object.assign({},s),t.expires_at=hn(s.expires_in));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function Ee(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function An(s){return{data:s,error:null}}function jn(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n}=s,o=Tn(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Pn(s){return s}function Rn(s){return s.access_token&&s.refresh_token&&s.expires_in}var In=globalThis&&globalThis.__rest||function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};class $n{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=pr(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await I(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(P(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await I(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ee})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=In(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await I(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:jn,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(P(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await I(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ee})}catch(t){if(P(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,n,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await I(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(n=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:Pn});if(h.error)throw h.error;const u=await h.json(),d=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),f=JSON.parse(g.split(";")[1].split("=")[1]);c[`${f}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(P(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await I(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ee})}catch(t){if(P(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await I(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ee})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await I(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ee})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await I(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(P(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await I(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(P(t))return{data:null,error:t};throw t}}}const Dn="2.43.1",Un="http://localhost:9999",xn="supabase.auth.token",Ln={"X-Client-Info":`gotrue-js/${Dn}`},Gt=10,Kt={getItem:s=>We()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{We()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{We()&&globalThis.localStorage.removeItem(s)}};function Nn(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}Nn();const Fn={url:Un,storageKey:xn,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ln,flowType:"implicit",debug:!1},Ve=30*1e3,qt=3;class ze{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=ze.nextInstanceID,ze.nextInstanceID+=1,this.instanceID>0&&_e()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Fn),e);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||Kt,this.admin=new $n({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=pr(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===Kt&&!We()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),_e()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=yt("_initialize",async()=>{try{const e=_e()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromUrl(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:i,redirectType:n}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",n),await this._saveSession(i),setTimeout(async()=>{n==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return P(e)?{error:e}:{error:new vr("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,r,i;try{await this._removeSession();let n;if("email"in e){const{email:h,password:u,options:d}=e;let v=null,g=null;if(this.flowType==="pkce"){const p=Ge();await xe(this.storage,`${this.storageKey}-code-verifier`,p),v=await Ke(p),g=p===v?"plain":"s256"}n=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:h,password:u,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:v,code_challenge_method:g},xform:ve})}else if("phone"in e){const{phone:h,password:u,options:d}=e;n=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:ve})}else throw new qe("You must provide either an email or phone number and a password");const{data:o,error:a}=n;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(P(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:n,password:o,options:a}=e;t=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ve})}else if("phone"in e){const{phone:n,password:o,options:a}=e;t=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ve})}else throw new qe("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ht}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:i})}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,n;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await Je(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:i}=await I(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:ve});return await ct(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ht}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:i,access_token:n,nonce:o}=e,a=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ve}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ht}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,n,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,h=null;if(this.flowType==="pkce"){const d=Ge();await xe(this.storage,`${this.storageKey}-code-verifier`,d),c=await Ke(d),h=d===c?"plain":"s256"}const{error:u}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:h}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new qe("You must provide either an email or phone number.")}catch(a){if(P(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:i,error:n}=await I(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:ve});if(n)throw n;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,a=i.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(i){if(P(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{return await this._removeSession(),await I(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:An})}catch(n){if(P(n))return{data:null,error:n};throw n}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new je;const{error:i}=await I(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(P(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:n}=e,{error:o}=await I(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:n}=e,{data:o,error:a}=await I(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new qe("You must provide either an email or phone number and a type")}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await yt("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!bt("_useSession"))throw new Error("Please use #_useSession()");bt("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const n=await Je(this.storage,this.storageKey);this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var r,i;if(!e){const{data:n,error:o}=t;if(o)throw o;e=(i=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0}return await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ee})})}catch(t){if(P(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:n}=r;if(n)throw n;if(!i.session)throw new je;const o=i.session,{data:a,error:l}=await I(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:o.access_token,xform:Ee});if(l)throw l;return o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Mt(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new je;const t=Date.now()/1e3;let r=t,i=!0,n=null;const o=Mt(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};n=a}else{const{data:a,error:l}=await this.getUser(e.access_token);if(l)throw l;n={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(P(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new je;const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!_e())throw new fe("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new fe("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ut("Not a valid PKCE flow url.");if(e){const f=Q("code");if(!f)throw new ut("No code detected.");const{data:m,error:w}=await this.exchangeCodeForSession(f);if(w)throw w;if(!m.session)throw new ut("No session detected.");let R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:m.session,redirectType:null},error:null}}const t=Q("error_description");if(t){const f=Q("error_code");if(!f)throw new fe("No error_code detected.");const m=Q("error");throw m?new fe(t,{error:m,code:f}):new fe("No error detected.")}const r=Q("provider_token"),i=Q("provider_refresh_token"),n=Q("access_token");if(!n)throw new fe("No access_token detected.");const o=Q("expires_in");if(!o)throw new fe("No expires_in detected.");const a=Q("refresh_token");if(!a)throw new fe("No refresh_token detected.");const l=Q("token_type");if(!l)throw new fe("No token_type detected.");const h=Math.round(Date.now()/1e3)+parseInt(o),{data:u,error:d}=await this.getUser(n);if(d)throw d;const v=u.user,g={provider_token:r,provider_refresh_token:i,access_token:n,expires_in:parseInt(o),expires_at:h,refresh_token:a,token_type:l,user:v},p=Q("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:g,redirectType:p},error:null}}catch(t){if(P(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return _e()&&(!!Q("access_token")||!!Q("error_description"))}async _isPKCEFlow(){const e=await Je(this.storage,`${this.storageKey}-code-verifier`);return!!Q("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:n}=t;if(n)return{error:n};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Sn(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ct(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=un(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),this._emitInitialSession(t),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:n},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){const n=Ge();await xe(this.storage,`${this.storageKey}-code-verifier`,n),r=await Ke(n),i=n===r?"plain":"s256"}try{return await I(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(P(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await gn(async i=>(await _n(i*200),this._debug(t,"refreshing attempt",i),await I(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ve})),(i,n,o)=>o&&o.error&&Ht(o.error)&&Date.now()+(i+1)*200-r<Ve)}catch(r){if(this._debug(t,"error",r),P(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),_e()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Je(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),n=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+Gt;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${Gt}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Ht(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new je;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new rt;const{data:n,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!n.session)throw new je;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const a={session:n.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(n){if(this._debug(i,"error",n),P(n)){const o={session:null,error:n};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){n.push(l)}});if(await Promise.all(o),n.length>0){for(let a=0;a<n.length;a+=1)console.error(n[a]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),xe(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await ct(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_e()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ve);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ve);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ve}ms, refresh threshold is ${qt} ticks`),i<=qt&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_e()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const i=Ge();await xe(this.storage,`${this.storageKey}-code-verifier`,i);const n=await Ke(i),o=i===n?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",n,"method",o);const a=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(t!=null&&t.queryParams){const i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:n}=t;return n?{data:null,error:n}:await I(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:n,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:l}=await I(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((i=a==null?void 0:a.totp)===null||i===void 0)&&i.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var r;const{data:i,error:n}=t;if(n)return{data:null,error:n};const{data:o,error:a}=await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var r;const{data:i,error:n}=t;return n?{data:null,error:n}:await I(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(n=>n.factor_type==="totp"&&n.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,r;const{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}})}}ze.nextInstanceID=0;class Bn extends ze{constructor(e){super(e)}}var Mn=globalThis&&globalThis.__awaiter||function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?n(h.value):i(h.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const zn={headers:rn},Hn={schema:"public"},Jn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Gn={};class Kn{constructor(e,t,r){var i,n,o,a,l,c,h,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=ln(e);this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const v=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g={db:Hn,realtime:Gn,auth:Object.assign(Object.assign({},Jn),{storageKey:v}),global:zn},p=cn(r??{},g);this.storageKey=(n=(i=p.auth)===null||i===void 0?void 0:i.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=(o=p.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,(c=p.global)===null||c===void 0?void 0:c.fetch),this.fetch=an(t,this._getAccessToken.bind(this),(h=p.global)===null||h===void 0?void 0:h.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new ls(`${d}/rest/v1`,{headers:this.headers,schema:(u=p.db)===null||u===void 0?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new es(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new en(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Mn(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:n,flowType:o},a,l){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Bn({url:this.authUrl,headers:Object.assign(Object.assign({},c),a),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,fetch:l})}_initRealtimeClient(e){return new Hs(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qn=(s,e,t)=>new Kn(s,e,t);var Vn=Object.create,br=Object.defineProperty,Wn=Object.getOwnPropertyDescriptor,yr=Object.getOwnPropertyNames,Xn=Object.getPrototypeOf,Yn=Object.prototype.hasOwnProperty,Qn=(s,e)=>function(){return e||(0,s[yr(s)[0]])((e={exports:{}}).exports,e),e.exports},Zn=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yr(e))!Yn.call(s,i)&&i!==t&&br(s,i,{get:()=>e[i],enumerable:!(r=Wn(e,i))||r.enumerable});return s},wr=(s,e,t)=>(t=s!=null?Vn(Xn(s)):{},Zn(e||!s||!s.__esModule?br(t,"default",{value:s,enumerable:!0}):t,s)),kr=Qn({"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(s){s.parse=r,s.serialize=i;var e=Object.prototype.toString,t=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r(c,h){if(typeof c!="string")throw new TypeError("argument str must be a string");for(var u={},d=h||{},v=d.decode||n,g=0;g<c.length;){var p=c.indexOf("=",g);if(p===-1)break;var f=c.indexOf(";",g);if(f===-1)f=c.length;else if(f<p){g=c.lastIndexOf(";",p-1)+1;continue}var m=c.slice(g,p).trim();if(u[m]===void 0){var w=c.slice(p+1,f).trim();w.charCodeAt(0)===34&&(w=w.slice(1,-1)),u[m]=l(w,v)}g=f+1}return u}function i(c,h,u){var d=u||{},v=d.encode||o;if(typeof v!="function")throw new TypeError("option encode is invalid");if(!t.test(c))throw new TypeError("argument name is invalid");var g=v(h);if(g&&!t.test(g))throw new TypeError("argument val is invalid");var p=c+"="+g;if(d.maxAge!=null){var f=d.maxAge-0;if(isNaN(f)||!isFinite(f))throw new TypeError("option maxAge is invalid");p+="; Max-Age="+Math.floor(f)}if(d.domain){if(!t.test(d.domain))throw new TypeError("option domain is invalid");p+="; Domain="+d.domain}if(d.path){if(!t.test(d.path))throw new TypeError("option path is invalid");p+="; Path="+d.path}if(d.expires){var m=d.expires;if(!a(m)||isNaN(m.valueOf()))throw new TypeError("option expires is invalid");p+="; Expires="+m.toUTCString()}if(d.httpOnly&&(p+="; HttpOnly"),d.secure&&(p+="; Secure"),d.priority){var w=typeof d.priority=="string"?d.priority.toLowerCase():d.priority;switch(w){case"low":p+="; Priority=Low";break;case"medium":p+="; Priority=Medium";break;case"high":p+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(d.sameSite){var R=typeof d.sameSite=="string"?d.sameSite.toLowerCase():d.sameSite;switch(R){case!0:p+="; SameSite=Strict";break;case"lax":p+="; SameSite=Lax";break;case"strict":p+="; SameSite=Strict";break;case"none":p+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return p}function n(c){return c.indexOf("%")!==-1?decodeURIComponent(c):c}function o(c){return encodeURIComponent(c)}function a(c){return e.call(c)==="[object Date]"||c instanceof Date}function l(c,h){try{return h(c)}catch{return c}}}}),dt=wr(kr()),Sr=wr(kr());function ei(s){if(!s)return null;try{const e=JSON.parse(s);if(!e)return null;if(e.constructor.name==="Object")return e;if(e.constructor.name!=="Array")throw new Error(`Unexpected format: ${e.constructor.name}`);const[t,r,i]=e[0].split("."),n=qr(r),o=new TextDecoder,{exp:a,sub:l,...c}=JSON.parse(o.decode(n));return{expires_at:a,expires_in:a-Math.round(Date.now()/1e3),token_type:"bearer",access_token:e[0],refresh_token:e[1],provider_token:e[2],provider_refresh_token:e[3],user:{id:l,factors:e[4],...c}}}catch(e){return console.warn("Failed to parse cookie string:",e),null}}function ti(s){var e;return JSON.stringify([s.access_token,s.refresh_token,s.provider_token,s.provider_refresh_token,((e=s.user)==null?void 0:e.factors)??null])}function Re(){return typeof window<"u"&&typeof window.document<"u"}var ri={path:"/",maxAge:60*60*24*365*1e3},si=class{constructor(s){this.cookieOptions={...ri,...s}}getItem(s){const e=this.getCookie(s);return e?s.endsWith("-code-verifier")?e:JSON.stringify(ei(e)):null}setItem(s,e){if(s.endsWith("-code-verifier")){this.setCookie(s,e);return}let t=JSON.parse(e);const r=ti(t);this.setCookie(s,r)}removeItem(s){this.deleteCookie(s)}},ni=class extends si{constructor(s){super(s)}getCookie(s){return Re()?(0,dt.parse)(document.cookie)[s]:null}setCookie(s,e){if(!Re())return null;document.cookie=(0,dt.serialize)(s,e,{...this.cookieOptions,httpOnly:!1})}deleteCookie(s){if(!Re())return null;document.cookie=(0,dt.serialize)(s,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function ii(s,e,t){var r;const i=Re();return qn(s,e,{...t,auth:{flowType:"pkce",autoRefreshToken:i,detectSessionInUrl:i,persistSession:!0,storage:t.auth.storage,...(r=t.auth)!=null&&r.storageKey?{storageKey:t.auth.storageKey}:{}}})}Sr.parse;Sr.serialize;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var oi=class extends ni{constructor(s=null,e){super(e),this.serverSession=s}getItem(s){return Re()?super.getItem(s):JSON.stringify(this.serverSession)}},ft;function ai({supabaseUrl:s,supabaseKey:e,event:t,serverSession:r,options:i,cookieOptions:n}){var o;const a=Re();if(a&&ft)return ft;const l=ii(s,e,{...i,global:{fetch:t.fetch,...i==null?void 0:i.global,headers:{...(o=i==null?void 0:i.global)==null?void 0:o.headers,"X-Client-Info":"@supabase/auth-helpers-sveltekit@0.10.1"}},auth:{storageKey:n==null?void 0:n.name,storage:new oi(r,n)}});return a&&(ft=l),l}const li=async({fetch:s,data:e,depends:t})=>{t("supabase:auth"),console.log("helloe from layout.js");const r=ai({supabaseUrl:zr,supabaseKey:Hr,event:{fetch:s},serverSession:e.session}),{data:{session:i}}=await r.auth.getSession();return{supabase:r,session:i}},_o=Object.freeze(Object.defineProperty({__proto__:null,load:li},Symbol.toStringTag,{value:"Module"}));function ci(s){const e=s-1;return e*e*e+1}function hi(s){return--s*s*s*s*s+1}function Vt(s,{delay:e=0,duration:t=400,easing:r=ci,axis:i="y"}={}){const n=getComputedStyle(s),o=+n.opacity,a=i==="y"?"height":"width",l=parseFloat(n[a]),c=i==="y"?["top","bottom"]:["left","right"],h=c.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),u=parseFloat(n[`padding${h[0]}`]),d=parseFloat(n[`padding${h[1]}`]),v=parseFloat(n[`margin${h[0]}`]),g=parseFloat(n[`margin${h[1]}`]),p=parseFloat(n[`border${h[0]}Width`]),f=parseFloat(n[`border${h[1]}Width`]);return{delay:e,duration:t,easing:r,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*o};${a}: ${m*l}px;padding-${c[0]}: ${m*u}px;padding-${c[1]}: ${m*d}px;margin-${c[0]}: ${m*v}px;margin-${c[1]}: ${m*g}px;border-${c[0]}-width: ${m*p}px;border-${c[1]}-width: ${m*f}px;`}}const ui=s=>({svgSize:s&4}),Wt=s=>({svgSize:s[5][s[2]]}),di=s=>({svgSize:s&4}),Xt=s=>({svgSize:s[5][s[2]]});function fi(s){let e,t,r,i,n,o,a=s[0]&&Yt(s);const l=s[9].default,c=ae(l,s,s[8],Wt);let h=[{type:"button"},s[6],{class:s[4]},{"aria-label":r=s[1]??s[0]}],u={};for(let d=0;d<h.length;d+=1)u=U(u,h[d]);return{c(){e=L("button"),a&&a.c(),t=q(),c&&c.c(),this.h()},l(d){e=N(d,"BUTTON",{type:!0,class:!0,"aria-label":!0});var v=x(e);a&&a.l(v),t=V(v),c&&c.l(v),v.forEach(y),this.h()},h(){se(e,u)},m(d,v){O(d,e,v),a&&a.m(e,null),F(e,t),c&&c.m(e,null),e.autofocus&&e.focus(),i=!0,n||(o=ee(e,"click",s[10]),n=!0)},p(d,v){d[0]?a?a.p(d,v):(a=Yt(d),a.c(),a.m(e,t)):a&&(a.d(1),a=null),c&&c.p&&(!i||v&260)&&le(c,l,d,d[8],i?he(l,d[8],v,ui):ce(d[8]),Wt),se(e,u=de(h,[{type:"button"},v&64&&d[6],(!i||v&16)&&{class:d[4]},(!i||v&3&&r!==(r=d[1]??d[0]))&&{"aria-label":r}]))},i(d){i||(E(c,d),i=!0)},o(d){A(c,d),i=!1},d(d){d&&y(e),a&&a.d(),c&&c.d(d),n=!1,o()}}}function _i(s){let e,t,r,i,n=s[0]&&Qt(s);const o=s[9].default,a=ae(o,s,s[8],Xt);let l=[{href:s[3]},s[6],{class:s[4]},{"aria-label":r=s[1]??s[0]}],c={};for(let h=0;h<l.length;h+=1)c=U(c,l[h]);return{c(){e=L("a"),n&&n.c(),t=q(),a&&a.c(),this.h()},l(h){e=N(h,"A",{href:!0,class:!0,"aria-label":!0});var u=x(e);n&&n.l(u),t=V(u),a&&a.l(u),u.forEach(y),this.h()},h(){se(e,c)},m(h,u){O(h,e,u),n&&n.m(e,null),F(e,t),a&&a.m(e,null),i=!0},p(h,u){h[0]?n?n.p(h,u):(n=Qt(h),n.c(),n.m(e,t)):n&&(n.d(1),n=null),a&&a.p&&(!i||u&260)&&le(a,o,h,h[8],i?he(o,h[8],u,di):ce(h[8]),Xt),se(e,c=de(l,[(!i||u&8)&&{href:h[3]},u&64&&h[6],(!i||u&16)&&{class:h[4]},(!i||u&3&&r!==(r=h[1]??h[0]))&&{"aria-label":r}]))},i(h){i||(E(a,h),i=!0)},o(h){A(a,h),i=!1},d(h){h&&y(e),n&&n.d(),a&&a.d(h)}}}function Yt(s){let e,t;return{c(){e=L("span"),t=ye(s[0]),this.h()},l(r){e=N(r,"SPAN",{class:!0});var i=x(e);t=we(i,s[0]),i.forEach(y),this.h()},h(){S(e,"class","sr-only")},m(r,i){O(r,e,i),F(e,t)},p(r,i){i&1&&ir(t,r[0])},d(r){r&&y(e)}}}function Qt(s){let e,t;return{c(){e=L("span"),t=ye(s[0]),this.h()},l(r){e=N(r,"SPAN",{class:!0});var i=x(e);t=we(i,s[0]),i.forEach(y),this.h()},h(){S(e,"class","sr-only")},m(r,i){O(r,e,i),F(e,t)},p(r,i){i&1&&ir(t,r[0])},d(r){r&&y(e)}}}function gi(s){let e,t,r,i;const n=[_i,fi],o=[];function a(l,c){return l[3]?0:1}return e=a(s),t=o[e]=n[e](s),{c(){t.c(),r=Ie()},l(l){t.l(l),r=Ie()},m(l,c){o[e].m(l,c),O(l,r,c),i=!0},p(l,[c]){let h=e;e=a(l),e===h?o[e].p(l,c):(Ye(),A(o[h],1,1,()=>{o[h]=null}),Qe(),t=o[e],t?t.p(l,c):(t=o[e]=n[e](l),t.c()),E(t,1),t.m(r.parentNode,r))},i(l){i||(E(t),i=!0)},o(l){A(t),i=!1},d(l){l&&y(r),o[e].d(l)}}}function mi(s,e,t){const r=["color","name","ariaLabel","size","href"];let i=W(e,r),{$$slots:n={},$$scope:o}=e;const a=nr("background");let{color:l="default"}=e,{name:c=void 0}=e,{ariaLabel:h=void 0}=e,{size:u="md"}=e,{href:d=void 0}=e;const v={dark:"text-gray-500 hover:text-gray-900 hover:bg-gray-200 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"text-gray-500 focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 dark:hover:text-gray-300",red:"text-red-500 focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-800 dark:hover:text-red-300",yellow:"text-yellow-500 focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-800 dark:hover:text-yellow-300",green:"text-green-500 focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-800 dark:hover:text-green-300",indigo:"text-indigo-500 focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800 dark:hover:text-indigo-300",purple:"text-purple-500 focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-800 dark:hover:text-purple-300",pink:"text-pink-500 focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-800 dark:hover:text-pink-300",blue:"text-blue-500 focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-800 dark:hover:text-blue-300",primary:"text-primary-500 focus:ring-primary-400 hover:bg-primary-200 dark:hover:bg-primary-800 dark:hover:text-primary-300",default:"focus:ring-gray-400"},g={xs:"m-0.5 rounded-sm focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"m-0.5 rounded-lg focus:ring-2 p-1.5",lg:"m-0.5 rounded-lg focus:ring-2 p-2.5"};let p;const f={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5",lg:"w-5 h-5"};function m(w){Z.call(this,s,w)}return s.$$set=w=>{t(14,e=U(U({},e),X(w))),t(6,i=W(e,r)),"color"in w&&t(7,l=w.color),"name"in w&&t(0,c=w.name),"ariaLabel"in w&&t(1,h=w.ariaLabel),"size"in w&&t(2,u=w.size),"href"in w&&t(3,d=w.href),"$$scope"in w&&t(8,o=w.$$scope)},s.$$.update=()=>{t(4,p=Y("focus:outline-none whitespace-normal",g[u],v[l],l==="default"&&(a?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),e.class))},e=X(e),[c,h,u,d,p,f,i,l,o,n,m]}class pi extends ge{constructor(e){super(),me(this,e,mi,gi,ue,{color:7,name:0,ariaLabel:1,size:2,href:3})}}const vi=s=>({}),Zt=s=>({}),bi=s=>({}),er=s=>({});function yi(s){let e,t,r;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(i){e=Ce(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var n=x(e);t=Ce(n,"path",{d:!0,"fill-rule":!0,"clip-rule":!0}),x(t).forEach(y),n.forEach(y),this.h()},h(){S(t,"d",`M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1
  0 100-2H3a1 1 0 000 2h1z`),S(t,"fill-rule","evenodd"),S(t,"clip-rule","evenodd"),S(e,"class",r=s[2][s[1]]),S(e,"fill","currentColor"),S(e,"viewBox","0 0 20 20"),S(e,"xmlns","http://www.w3.org/2000/svg")},m(i,n){O(i,e,n),F(e,t)},p(i,n){n&2&&r!==(r=i[2][i[1]])&&S(e,"class",r)},d(i){i&&y(e)}}}function wi(s){let e,t,r;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(i){e=Ce(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var n=x(e);t=Ce(n,"path",{d:!0}),x(t).forEach(y),n.forEach(y),this.h()},h(){S(t,"d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"),S(e,"class",r=s[2][s[1]]),S(e,"fill","currentColor"),S(e,"viewBox","0 0 20 20"),S(e,"xmlns","http://www.w3.org/2000/svg")},m(i,n){O(i,e,n),F(e,t)},p(i,n){n&2&&r!==(r=i[2][i[1]])&&S(e,"class",r)},d(i){i&&y(e)}}}function ki(s){let e,t=`if ('color-theme' in localStorage) {
      // explicit preference - overrides author's choice
      localStorage.getItem('color-theme') === 'dark'
        ? window.document.documentElement.classList.add('dark')
        : window.document.documentElement.classList.remove('dark');
    } else {
      // browser preference - does not overrides
      if (window.matchMedia('(prefers-color-scheme: dark)').matches)
        window.document.documentElement.classList.add('dark');
    }`,r,i,n,o,a,l,c,h,u;const d=s[7].lightIcon,v=ae(d,s,s[6],er),g=v||yi(s),p=s[7].darkIcon,f=ae(p,s,s[6],Zt),m=f||wi(s);let w=[{"aria-label":"Dark mode"},{type:"button"},s[4],{class:l=Y(s[0],s[5].class)}],R={};for(let k=0;k<w.length;k+=1)R=U(R,w[k]);return{c(){e=L("script"),e.textContent=t,r=q(),i=L("button"),n=L("span"),g&&g.c(),o=q(),a=L("span"),m&&m.c(),this.h()},l(k){const j=Dr("svelte-19epqvd",document.head);e=N(j,"SCRIPT",{"data-svelte-h":!0}),or(e)!=="svelte-1oo2ycg"&&(e.textContent=t),j.forEach(y),r=V(k),i=N(k,"BUTTON",{"aria-label":!0,type:!0,class:!0});var pe=x(i);n=N(pe,"SPAN",{class:!0});var C=x(n);g&&g.l(C),C.forEach(y),o=V(pe),a=N(pe,"SPAN",{class:!0});var ie=x(a);m&&m.l(ie),ie.forEach(y),pe.forEach(y),this.h()},h(){S(n,"class","hidden dark:block"),S(a,"class","block dark:hidden"),se(i,R)},m(k,j){F(document.head,e),O(k,r,j),O(k,i,j),F(i,n),g&&g.m(n,null),F(i,o),F(i,a),m&&m.m(a,null),i.autofocus&&i.focus(),c=!0,h||(u=ee(i,"click",s[3]),h=!0)},p(k,[j]){v?v.p&&(!c||j&64)&&le(v,d,k,k[6],c?he(d,k[6],j,bi):ce(k[6]),er):g&&g.p&&(!c||j&2)&&g.p(k,c?j:-1),f?f.p&&(!c||j&64)&&le(f,p,k,k[6],c?he(p,k[6],j,vi):ce(k[6]),Zt):m&&m.p&&(!c||j&2)&&m.p(k,c?j:-1),se(i,R=de(w,[{"aria-label":"Dark mode"},{type:"button"},j&16&&k[4],(!c||j&33&&l!==(l=Y(k[0],k[5].class)))&&{class:l}]))},i(k){c||(E(g,k),E(m,k),c=!0)},o(k){A(g,k),A(m,k),c=!1},d(k){k&&(y(r),y(i)),y(e),g&&g.d(k),m&&m.d(k),h=!1,u()}}}function Si(s,e,t){const r=["btnClass","size"];let i=W(e,r),{$$slots:n={},$$scope:o}=e,{btnClass:a="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5"}=e,{size:l="md"}=e;const c={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},h=()=>{const u=window.document.documentElement.classList.toggle("dark");localStorage.setItem("color-theme",u?"dark":"light")};return s.$$set=u=>{t(5,e=U(U({},e),X(u))),t(4,i=W(e,r)),"btnClass"in u&&t(0,a=u.btnClass),"size"in u&&t(1,l=u.size),"$$scope"in u&&t(6,o=u.$$scope)},e=X(e),[a,l,c,h,i,e,o,n]}class Ti extends ge{constructor(e){super(),me(this,e,Si,ki,ue,{btnClass:0,size:1})}}const Ei=s=>({hidden:s&8}),tr=s=>({hidden:s[3],toggle:s[4]});function Oi(s){let e,t,r;const i=s[7].default,n=ae(i,s,s[8],tr);return{c(){e=L("div"),n&&n.c(),this.h()},l(o){e=N(o,"DIV",{class:!0});var a=x(e);n&&n.l(a),a.forEach(y),this.h()},h(){S(e,"class",t=Y(s[1],s[6].classNavDiv,s[2]&&"w-full"||"container"))},m(o,a){O(o,e,a),n&&n.m(e,null),r=!0},p(o,a){n&&n.p&&(!r||a&264)&&le(n,i,o,o[8],r?he(i,o[8],a,Ei):ce(o[8]),tr),(!r||a&70&&t!==(t=Y(o[1],o[6].classNavDiv,o[2]&&"w-full"||"container")))&&S(e,"class",t)},i(o){r||(E(n,o),r=!0)},o(o){A(n,o),r=!1},d(o){o&&y(e),n&&n.d(o)}}}function Ci(s){let e,t;const r=[{tag:"nav"},s[5],{class:Y(s[0],s[6].class)}];let i={$$slots:{default:[Oi]},$$scope:{ctx:s}};for(let n=0;n<r.length;n+=1)i=U(i,r[n]);return e=new lr({props:i}),{c(){M(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,o){H(e,n,o),t=!0},p(n,[o]){const a=o&97?de(r,[r[0],o&32&&cr(n[5]),o&65&&{class:Y(n[0],n[6].class)}]):{};o&334&&(a.$$scope={dirty:o,ctx:n}),e.$set(a)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ai(s,e,t){const r=["navClass","navDivClass","fluid"];let i=W(e,r),{$$slots:n={},$$scope:o}=e,{navClass:a="px-2 sm:px-4 py-2.5 w-full"}=e,{navDivClass:l="mx-auto flex justify-between items-center "}=e,{fluid:c=!1}=e,h=!0,u=()=>{t(3,h=!h)};return s.$$set=d=>{t(6,e=U(U({},e),X(d))),t(5,i=W(e,r)),"navClass"in d&&t(0,a=d.navClass),"navDivClass"in d&&t(1,l=d.navDivClass),"fluid"in d&&t(2,c=d.fluid),"$$scope"in d&&t(8,o=d.$$scope)},s.$$.update=()=>{t(5,i.color=i.color??"navbar",i)},e=X(e),[a,l,c,h,u,i,e,n,o]}class ji extends ge{constructor(e){super(),me(this,e,Ai,Ci,ue,{navClass:0,navDivClass:1,fluid:2})}}function Pi(s){let e,t,r;const i=s[4].default,n=ae(i,s,s[3],null);let o=[{href:s[0]},s[1],{class:t=Y("flex items-center",s[2].class)}],a={};for(let l=0;l<o.length;l+=1)a=U(a,o[l]);return{c(){e=L("a"),n&&n.c(),this.h()},l(l){e=N(l,"A",{href:!0,class:!0});var c=x(e);n&&n.l(c),c.forEach(y),this.h()},h(){se(e,a)},m(l,c){O(l,e,c),n&&n.m(e,null),r=!0},p(l,[c]){n&&n.p&&(!r||c&8)&&le(n,i,l,l[3],r?he(i,l[3],c,null):ce(l[3]),null),se(e,a=de(o,[(!r||c&1)&&{href:l[0]},c&2&&l[1],(!r||c&4&&t!==(t=Y("flex items-center",l[2].class)))&&{class:t}]))},i(l){r||(E(n,l),r=!0)},o(l){A(n,l),r=!1},d(l){l&&y(e),n&&n.d(l)}}}function Ri(s,e,t){const r=["href"];let i=W(e,r),{$$slots:n={},$$scope:o}=e,{href:a=""}=e;return s.$$set=l=>{t(2,e=U(U({},e),X(l))),t(1,i=W(e,r)),"href"in l&&t(0,a=l.href),"$$scope"in l&&t(3,o=l.$$scope)},e=X(e),[a,i,e,o,n]}class Ii extends ge{constructor(e){super(),me(this,e,Ri,Pi,ue,{href:0})}}function $i(s){let e,t,r,i,n,o=[{xmlns:"http://www.w3.org/2000/svg"},{role:"button"},{tabindex:"0"},{width:s[0]},{height:s[0]},{class:r=s[4].class},s[5],{"aria-label":s[1]},{fill:"none"},{viewBox:s[2]},{"stroke-width":"2"}],a={};for(let l=0;l<o.length;l+=1)a=U(a,o[l]);return{c(){e=Oe("svg"),t=new Ur(!0),this.h()},l(l){e=Ce(l,"svg",{xmlns:!0,role:!0,tabindex:!0,width:!0,height:!0,class:!0,"aria-label":!0,fill:!0,viewBox:!0,"stroke-width":!0});var c=x(e);t=xr(c,!0),c.forEach(y),this.h()},h(){t.a=null,jt(e,a)},m(l,c){O(l,e,c),t.m(s[3],e),i||(n=ee(e,"click",s[8]),i=!0)},p(l,[c]){c&8&&t.p(l[3]),jt(e,a=de(o,[{xmlns:"http://www.w3.org/2000/svg"},{role:"button"},{tabindex:"0"},c&1&&{width:l[0]},c&1&&{height:l[0]},c&16&&r!==(r=l[4].class)&&{class:r},c&32&&l[5],c&2&&{"aria-label":l[1]},{fill:"none"},c&4&&{viewBox:l[2]},{"stroke-width":"2"}]))},i:Xe,o:Xe,d(l){l&&y(e),i=!1,n()}}}function Di(s,e,t){const r=["size","color","variation","ariaLabel"];let i=W(e,r),{size:n="24"}=e,{color:o="currentColor"}=e,{variation:a="outline"}=e,{ariaLabel:l="bars 3"}=e,c,h,u=`<path stroke="${o}" stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path> `,d=`<path fill="${o}" clip-rule="evenodd" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"></path> `;function v(g){Z.call(this,s,g)}return s.$$set=g=>{t(4,e=U(U({},e),X(g))),t(5,i=W(e,r)),"size"in g&&t(0,n=g.size),"color"in g&&t(6,o=g.color),"variation"in g&&t(7,a=g.variation),"ariaLabel"in g&&t(1,l=g.ariaLabel)},s.$$.update=()=>{if(s.$$.dirty&128)switch(a){case"outline":t(3,h=u),t(2,c="0 0 24 24");break;case"solid":t(3,h=d),t(2,c="0 0 24 24");break;default:t(3,h=u),t(2,c="0 0 24 24")}},e=X(e),[n,l,c,h,e,i,o,a,v]}class Ui extends ge{constructor(e){super(),me(this,e,Di,$i,ue,{size:0,color:6,variation:7,ariaLabel:1})}}function xi(s){let e,t;return e=new Ui({props:{class:Y(s[1],s[3].classMenu)}}),{c(){M(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,i){H(e,r,i),t=!0},p(r,i){const n={};i&10&&(n.class=Y(r[1],r[3].classMenu)),e.$set(n)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function Li(s){let e,t;const r=[{name:"Open main menu"},s[2],{class:Y(s[0],s[3].class)}];let i={$$slots:{default:[xi]},$$scope:{ctx:s}};for(let n=0;n<r.length;n+=1)i=U(i,r[n]);return e=new pi({props:i}),e.$on("click",s[4]),{c(){M(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,o){H(e,n,o),t=!0},p(n,[o]){const a=o&13?de(r,[r[0],o&4&&cr(n[2]),o&9&&{class:Y(n[0],n[3].class)}]):{};o&42&&(a.$$scope={dirty:o,ctx:n}),e.$set(a)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ni(s,e,t){const r=["btnClass","menuClass"];let i=W(e,r),{btnClass:n="ml-3 md:hidden"}=e,{menuClass:o="h-6 w-6 shrink-0"}=e;function a(l){Z.call(this,s,l)}return s.$$set=l=>{t(3,e=U(U({},e),X(l))),t(2,i=W(e,r)),"btnClass"in l&&t(0,n=l.btnClass),"menuClass"in l&&t(1,o=l.menuClass)},e=X(e),[n,o,i,e,a]}class Fi extends ge{constructor(e){super(),me(this,e,Ni,Li,ue,{btnClass:0,menuClass:1})}}function _t(s){let e,t,r,i,n;const o=s[7].default,a=ae(o,s,s[6],null);let l=[{role:t=s[0]?void 0:"link"},{href:s[0]},s[2],{class:s[1]}],c={};for(let h=0;h<l.length;h+=1)c=U(c,l[h]);return{c(){e=L(s[0]?"a":"div"),a&&a.c(),this.h()},l(h){e=N(h,((s[0]?"a":"div")||"null").toUpperCase(),{role:!0,href:!0,class:!0});var u=x(e);a&&a.l(u),u.forEach(y),this.h()},h(){Pt(s[0]?"a":"div")(e,c)},m(h,u){O(h,e,u),a&&a.m(e,null),r=!0,i||(n=[ee(e,"blur",s[8]),ee(e,"change",s[9]),ee(e,"click",s[10]),ee(e,"focus",s[11]),ee(e,"keydown",s[12]),ee(e,"keypress",s[13]),ee(e,"keyup",s[14]),ee(e,"mouseenter",s[15]),ee(e,"mouseleave",s[16]),ee(e,"mouseover",s[17])],i=!0)},p(h,u){a&&a.p&&(!r||u&64)&&le(a,o,h,h[6],r?he(o,h[6],u,null):ce(h[6]),null),Pt(h[0]?"a":"div")(e,c=de(l,[(!r||u&1&&t!==(t=h[0]?void 0:"link"))&&{role:t},(!r||u&1)&&{href:h[0]},u&4&&h[2],(!r||u&2)&&{class:h[1]}]))},i(h){r||(E(a,h),r=!0)},o(h){A(a,h),r=!1},d(h){h&&y(e),a&&a.d(h),i=!1,Cr(n)}}}function Bi(s){let e,t=s[0]?"a":"div",r,i=(s[0]?"a":"div")&&_t(s);return{c(){e=L("li"),i&&i.c()},l(n){e=N(n,"LI",{});var o=x(e);i&&i.l(o),o.forEach(y)},m(n,o){O(n,e,o),i&&i.m(e,null),r=!0},p(n,[o]){n[0],t?ue(t,n[0]?"a":"div")?(i.d(1),i=_t(n),t=n[0]?"a":"div",i.c(),i.m(e,null)):i.p(n,o):(i=_t(n),t=n[0]?"a":"div",i.c(),i.m(e,null))},i(n){r||(E(i,n),r=!0)},o(n){A(i,n),r=!1},d(n){n&&y(e),i&&i.d(n)}}}function Mi(s,e,t){const r=["href","active","activeClass","nonActiveClass"];let i=W(e,r),{$$slots:n={},$$scope:o}=e,{href:a=""}=e,{active:l=!1}=e,{activeClass:c=void 0}=e,{nonActiveClass:h=void 0}=e;const u=nr("navbar")??{};let d;function v(C){Z.call(this,s,C)}function g(C){Z.call(this,s,C)}function p(C){Z.call(this,s,C)}function f(C){Z.call(this,s,C)}function m(C){Z.call(this,s,C)}function w(C){Z.call(this,s,C)}function R(C){Z.call(this,s,C)}function k(C){Z.call(this,s,C)}function j(C){Z.call(this,s,C)}function pe(C){Z.call(this,s,C)}return s.$$set=C=>{t(19,e=U(U({},e),X(C))),t(2,i=W(e,r)),"href"in C&&t(0,a=C.href),"active"in C&&t(3,l=C.active),"activeClass"in C&&t(4,c=C.activeClass),"nonActiveClass"in C&&t(5,h=C.nonActiveClass),"$$scope"in C&&t(6,o=C.$$scope)},s.$$.update=()=>{t(1,d=Y("block py-2 pr-4 pl-3 md:p-0 rounded md:border-0",l?c??u.activeClass:h??u.nonActiveClass,e.class))},e=X(e),[a,d,i,l,c,h,o,n,v,g,p,f,m,w,R,k,j,pe]}class Ne extends ge{constructor(e){super(),me(this,e,Mi,Bi,ue,{href:0,active:3,activeClass:4,nonActiveClass:5})}}function zi(s){let e,t,r;const i=s[9].default,n=ae(i,s,s[11],null);let o=[s[4],{class:s[2]},{hidden:s[0]}],a={};for(let l=0;l<o.length;l+=1)a=U(a,o[l]);return{c(){e=L("div"),t=L("ul"),n&&n.c(),this.h()},l(l){e=N(l,"DIV",{class:!0});var c=x(e);t=N(c,"UL",{class:!0});var h=x(t);n&&n.l(h),h.forEach(y),c.forEach(y),this.h()},h(){S(t,"class",s[3]),se(e,a)},m(l,c){O(l,e,c),F(e,t),n&&n.m(t,null),r=!0},p(l,c){n&&n.p&&(!r||c&2048)&&le(n,i,l,l[11],r?he(i,l[11],c,null):ce(l[11]),null),(!r||c&8)&&S(t,"class",l[3]),se(e,a=de(o,[c&16&&l[4],(!r||c&4)&&{class:l[2]},(!r||c&1)&&{hidden:l[0]}]))},i(l){r||(E(n,l),r=!0)},o(l){A(n,l),r=!1},d(l){l&&y(e),n&&n.d(l)}}}function Hi(s){let e,t,r,i,n,o;t=new lr({props:{tag:"ul",border:!0,rounded:!0,color:"navbarUl",class:s[3],$$slots:{default:[Ji]},$$scope:{ctx:s}}});let a=[s[4],{class:s[2]},{role:"button"},{tabindex:"0"}],l={};for(let c=0;c<a.length;c+=1)l=U(l,a[c]);return{c(){e=L("div"),M(t.$$.fragment),this.h()},l(c){e=N(c,"DIV",{class:!0,role:!0,tabindex:!0});var h=x(e);z(t.$$.fragment,h),h.forEach(y),this.h()},h(){se(e,l)},m(c,h){O(c,e,h),H(t,e,null),i=!0,n||(o=ee(e,"click",s[10]),n=!0)},p(c,h){s=c;const u={};h&8&&(u.class=s[3]),h&2048&&(u.$$scope={dirty:h,ctx:s}),t.$set(u),se(e,l=de(a,[h&16&&s[4],(!i||h&4)&&{class:s[2]},{role:"button"},{tabindex:"0"}]))},i(c){i||(E(t.$$.fragment,c),c&&jr(()=>{i&&(r||(r=Rt(e,Vt,s[1],!0)),r.run(1))}),i=!0)},o(c){A(t.$$.fragment,c),c&&(r||(r=Rt(e,Vt,s[1],!1)),r.run(0)),i=!1},d(c){c&&y(e),J(t),c&&r&&r.end(),n=!1,o()}}}function Ji(s){let e;const t=s[9].default,r=ae(t,s,s[11],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,n){r&&r.m(i,n),e=!0},p(i,n){r&&r.p&&(!e||n&2048)&&le(r,t,i,i[11],e?he(t,i[11],n,null):ce(i[11]),null)},i(i){e||(E(r,i),e=!0)},o(i){A(r,i),e=!1},d(i){r&&r.d(i)}}}function Gi(s){let e,t,r,i;const n=[Hi,zi],o=[];function a(l,c){return l[0]?1:0}return e=a(s),t=o[e]=n[e](s),{c(){t.c(),r=Ie()},l(l){t.l(l),r=Ie()},m(l,c){o[e].m(l,c),O(l,r,c),i=!0},p(l,[c]){let h=e;e=a(l),e===h?o[e].p(l,c):(Ye(),A(o[h],1,1,()=>{o[h]=null}),Qe(),t=o[e],t?t.p(l,c):(t=o[e]=n[e](l),t.c()),E(t,1),t.m(r.parentNode,r))},i(l){i||(E(t),i=!0)},o(l){A(t),i=!1},d(l){l&&y(r),o[e].d(l)}}}function Ki(s,e,t){const r=["divClass","ulClass","hidden","slideParams","activeClass","nonActiveClass"];let i=W(e,r),{$$slots:n={},$$scope:o}=e,{divClass:a="w-full md:block md:w-auto"}=e,{ulClass:l="flex flex-col p-4 mt-4 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium"}=e,{hidden:c=!0}=e,{slideParams:h={delay:250,duration:500,easing:hi}}=e,{activeClass:u="text-white bg-primary-700 md:bg-transparent md:text-primary-700 md:dark:text-white dark:bg-primary-600 md:dark:bg-transparent"}=e,{nonActiveClass:d="text-gray-700 hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-primary-700 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"}=e;Ar("navbar",{activeClass:u,nonActiveClass:d});let v,g;function p(f){Z.call(this,s,f)}return s.$$set=f=>{t(12,e=U(U({},e),X(f))),t(4,i=W(e,r)),"divClass"in f&&t(5,a=f.divClass),"ulClass"in f&&t(6,l=f.ulClass),"hidden"in f&&t(0,c=f.hidden),"slideParams"in f&&t(1,h=f.slideParams),"activeClass"in f&&t(7,u=f.activeClass),"nonActiveClass"in f&&t(8,d=f.nonActiveClass),"$$scope"in f&&t(11,o=f.$$scope)},s.$$.update=()=>{t(2,v=Y(a,e.class)),t(3,g=Y(l,e.classUl))},e=X(e),[c,h,v,g,i,a,l,u,d,n,p,o]}class qi extends ge{constructor(e){super(),me(this,e,Ki,Gi,ue,{divClass:5,ulClass:6,hidden:0,slideParams:1,activeClass:7,nonActiveClass:8})}}function Vi(s){let e,t;return{c(){e=L("img"),this.h()},l(r){e=N(r,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Ir(e.src,t=Nr)||S(e,"src",t),S(e,"class","h-12"),S(e,"alt","Flowbite Logo")},m(r,i){O(r,e,i)},p:Xe,d(r){r&&y(e)}}}function Wi(s){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(r){e=Ce(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var i=x(e);t=Ce(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),x(t).forEach(y),i.forEach(y),this.h()},h(){S(t,"stroke-linecap","round"),S(t,"stroke-linejoin","round"),S(t,"d","M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","none"),S(e,"viewBox","0 0 24 24"),S(e,"stroke-width","1.5"),S(e,"stroke","currentColor"),S(e,"class","w-6 h-6 dark:text-white")},m(r,i){O(r,e,i),F(e,t)},p:Xe,d(r){r&&y(e)}}}function Xi(s){let e;return{c(){e=ye("Home")},l(t){e=we(t,"Home")},m(t,r){O(t,e,r)},d(t){t&&y(e)}}}function rr(s){let e,t;return e=new Ne({props:{href:"/login",$$slots:{default:[Yi]},$$scope:{ctx:s}}}),{c(){M(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,i){H(e,r,i),t=!0},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function Yi(s){let e;return{c(){e=ye("Login")},l(t){e=we(t,"Login")},m(t,r){O(t,e,r)},d(t){t&&y(e)}}}function Qi(s){let e;return{c(){e=ye("Pricing")},l(t){e=we(t,"Pricing")},m(t,r){O(t,e,r)},d(t){t&&y(e)}}}function Zi(s){let e;return{c(){e=ye("Pricing")},l(t){e=we(t,"Pricing")},m(t,r){O(t,e,r)},d(t){t&&y(e)}}}function eo(s){let e;return{c(){e=ye("Pricing")},l(t){e=we(t,"Pricing")},m(t,r){O(t,e,r)},d(t){t&&y(e)}}}function sr(s){let e,t,r,i,n;return t=new ar({props:{type:"submit",$$slots:{default:[to]},$$scope:{ctx:s}}}),{c(){e=L("form"),M(t.$$.fragment),this.h()},l(o){e=N(o,"FORM",{method:!0,action:!0});var a=x(e);z(t.$$.fragment,a),a.forEach(y),this.h()},h(){S(e,"method","POST"),S(e,"action","/login?/logout")},m(o,a){O(o,e,a),H(t,e,null),r=!0,i||(n=$r(Br.call(null,e)),i=!0)},i(o){r||(E(t.$$.fragment,o),r=!0)},o(o){A(t.$$.fragment,o),r=!1},d(o){o&&y(e),J(t),i=!1,n()}}}function to(s){let e;return{c(){e=ye("Logout")},l(t){e=we(t,"Logout")},m(t,r){O(t,e,r)},d(t){t&&y(e)}}}function ro(s){let e,t,r,i,n,o,a,l,c,h,u,d,v;e=new Ne({props:{href:"/",active:!0,$$slots:{default:[Xi]},$$scope:{ctx:s}}});let g=s[0]==null&&rr(s);i=new Ne({props:{href:"/pricing",$$slots:{default:[Qi]},$$scope:{ctx:s}}}),o=new Ne({props:{href:"/pricing",$$slots:{default:[Zi]},$$scope:{ctx:s}}}),l=new Ne({props:{href:"/pricing",$$slots:{default:[eo]},$$scope:{ctx:s}}}),h=new Ti({props:{class:"!ml-4"}});let p=s[0]!=null&&sr(s);return{c(){M(e.$$.fragment),t=q(),g&&g.c(),r=q(),M(i.$$.fragment),n=q(),M(o.$$.fragment),a=q(),M(l.$$.fragment),c=q(),M(h.$$.fragment),u=q(),p&&p.c(),d=Ie()},l(f){z(e.$$.fragment,f),t=V(f),g&&g.l(f),r=V(f),z(i.$$.fragment,f),n=V(f),z(o.$$.fragment,f),a=V(f),z(l.$$.fragment,f),c=V(f),z(h.$$.fragment,f),u=V(f),p&&p.l(f),d=Ie()},m(f,m){H(e,f,m),O(f,t,m),g&&g.m(f,m),O(f,r,m),H(i,f,m),O(f,n,m),H(o,f,m),O(f,a,m),H(l,f,m),O(f,c,m),H(h,f,m),O(f,u,m),p&&p.m(f,m),O(f,d,m),v=!0},p(f,m){const w={};m&8&&(w.$$scope={dirty:m,ctx:f}),e.$set(w),f[0]==null?g?m&1&&E(g,1):(g=rr(f),g.c(),E(g,1),g.m(r.parentNode,r)):g&&(Ye(),A(g,1,1,()=>{g=null}),Qe());const R={};m&8&&(R.$$scope={dirty:m,ctx:f}),i.$set(R);const k={};m&8&&(k.$$scope={dirty:m,ctx:f}),o.$set(k);const j={};m&8&&(j.$$scope={dirty:m,ctx:f}),l.$set(j),f[0]!=null?p?m&1&&E(p,1):(p=sr(f),p.c(),E(p,1),p.m(d.parentNode,d)):p&&(Ye(),A(p,1,1,()=>{p=null}),Qe())},i(f){v||(E(e.$$.fragment,f),E(g),E(i.$$.fragment,f),E(o.$$.fragment,f),E(l.$$.fragment,f),E(h.$$.fragment,f),E(p),v=!0)},o(f){A(e.$$.fragment,f),A(g),A(i.$$.fragment,f),A(o.$$.fragment,f),A(l.$$.fragment,f),A(h.$$.fragment,f),A(p),v=!1},d(f){f&&(y(t),y(r),y(n),y(a),y(c),y(u),y(d)),J(e,f),g&&g.d(f),J(i,f),J(o,f),J(l,f),J(h,f),p&&p.d(f)}}}function so(s){let e,t,r,i,n,o,a,l,c='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 dark:text-white"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>',h,u,d,v,g,p,f;return t=new Ii({props:{class:"",href:"/",$$slots:{default:[Vi]},$$scope:{ctx:s}}}),n=new ar({props:{color:"none","data-collapse-toggle":"mobile-menu-3","aria-controls":"mobile-menu-3","aria-expanded":"false",class:"md:hidden text-gray-500 dark:text-gray-200 hover:bg-gray-100 dark:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 mr-1",$$slots:{default:[Wi]},$$scope:{ctx:s}}}),u=new Lr({props:{id:"search-navbar",class:"pl-10 dark:bg-gray-100 dark:text-gray-800",placeholder:"Search..."}}),v=new Fi({props:{btnClass:"mr-5 md:hidden"}}),v.$on("click",function(){Rr(s[6])&&s[6].apply(this,arguments)}),p=new qi({props:{hidden:s[5],class:"order-2",ulClass:"flex flex-col p-4 mt-4 md:flex-row md:items-center md:space-x-8 md:mt-0 md:text-sm md:font-medium",$$slots:{default:[ro]},$$scope:{ctx:s}}}),{c(){e=L("div"),M(t.$$.fragment),r=q(),i=L("div"),M(n.$$.fragment),o=q(),a=L("div"),l=L("div"),l.innerHTML=c,h=q(),M(u.$$.fragment),d=q(),M(v.$$.fragment),g=q(),M(p.$$.fragment),this.h()},l(m){e=N(m,"DIV",{class:!0});var w=x(e);z(t.$$.fragment,w),r=V(w),i=N(w,"DIV",{class:!0});var R=x(i);z(n.$$.fragment,R),o=V(R),a=N(R,"DIV",{class:!0});var k=x(a);l=N(k,"DIV",{class:!0,"data-svelte-h":!0}),or(l)!=="svelte-mbcdhl"&&(l.innerHTML=c),h=V(k),z(u.$$.fragment,k),k.forEach(y),R.forEach(y),w.forEach(y),d=V(m),z(v.$$.fragment,m),g=V(m),z(p.$$.fragment,m),this.h()},h(){S(l,"class","flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"),S(a,"class","hidden relative md:block"),S(i,"class","flex items-center"),S(e,"class","flex my-2 items-center")},m(m,w){O(m,e,w),H(t,e,null),F(e,r),F(e,i),H(n,i,null),F(i,o),F(i,a),F(a,l),F(a,h),H(u,a,null),O(m,d,w),H(v,m,w),O(m,g,w),H(p,m,w),f=!0},p(m,w){s=m;const R={};w&8&&(R.$$scope={dirty:w,ctx:s}),t.$set(R);const k={};w&8&&(k.$$scope={dirty:w,ctx:s}),n.$set(k);const j={};w&32&&(j.hidden=s[5]),w&9&&(j.$$scope={dirty:w,ctx:s}),p.$set(j)},i(m){f||(E(t.$$.fragment,m),E(n.$$.fragment,m),E(u.$$.fragment,m),E(v.$$.fragment,m),E(p.$$.fragment,m),f=!0)},o(m){A(t.$$.fragment,m),A(n.$$.fragment,m),A(u.$$.fragment,m),A(v.$$.fragment,m),A(p.$$.fragment,m),f=!1},d(m){m&&(y(e),y(d),y(g)),J(t),J(n),J(u),J(v,m),J(p,m)}}}function no(s){let e,t,r;e=new ji({props:{navClass:"border-b-none",class:"dark:bg-gray-900 border-0",navDivClass:"mx-auto flex flex-wrap md:flex-nowrap justify-between items-center",$$slots:{default:[so,({hidden:o,toggle:a})=>({5:o,6:a}),({hidden:o,toggle:a})=>(o?32:0)|(a?64:0)]},$$scope:{ctx:s}}});const i=s[2].default,n=ae(i,s,s[3],null);return{c(){M(e.$$.fragment),t=q(),n&&n.c()},l(o){z(e.$$.fragment,o),t=V(o),n&&n.l(o)},m(o,a){H(e,o,a),O(o,t,a),n&&n.m(o,a),r=!0},p(o,[a]){const l={};a&105&&(l.$$scope={dirty:a,ctx:o}),e.$set(l),n&&n.p&&(!r||a&8)&&le(n,i,o,o[3],r?he(i,o[3],a,null):ce(o[3]),null)},i(o){r||(E(e.$$.fragment,o),E(n,o),r=!0)},o(o){A(e.$$.fragment,o),A(n,o),r=!1},d(o){o&&y(t),J(e,o),n&&n.d(o)}}}function io(s,e,t){let{$$slots:r={},$$scope:i}=e,{data:n}=e,{supabase:o,session:a}=n;return Pr(()=>{console.log("hellor from onMount pt1");const{data:l}=o.auth.onAuthStateChange((c,h)=>{(h==null?void 0:h.expires_at)!==(a==null?void 0:a.expires_at)&&(console.log("hellor from onMount pt2"),Fr("supabase:auth"))});return()=>l.subscription.unsubscribe()}),s.$$set=l=>{"data"in l&&t(1,n=l.data),"$$scope"in l&&t(3,i=l.$$scope)},s.$$.update=()=>{s.$$.dirty&2&&t(0,{supabase:o,session:a}=n,a)},[a,n,r,i]}class go extends ge{constructor(e){super(),me(this,e,io,no,ue,{data:1})}}export{go as component,_o as universal};
